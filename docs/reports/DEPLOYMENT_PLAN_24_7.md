# ๐ ะะปะฐะฝ ัะฐะทะฒะตัััะฒะฐะฝะธั ัะธััะตะผั 24/7 ะดะปั ExamFlow 2.0

## ๐ ะัะฐัะบะพะต ัะตะทัะผะต

ะกะพะทะดะฐะฝะพ ะบะพะผะฟะปะตะบัะฝะพะต ัะตัะตะฝะธะต ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ัะฐะฑะพัั ExamFlow 24/7 ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ัะพะปัะบะพ ะฑะตัะฟะปะฐัะฝัั ะธะฝััััะผะตะฝัะพะฒ ะธ ะพะฟัะธะผะธะทะฐัะธะตะน ะดะปั Render ะฑะตัะฟะปะฐัะฝะพะณะพ ัะฐัะธัะฐ.

## ๐๏ธ ะััะธัะตะบัััะฐ ัะตัะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   GitHub Actionsโ    โ   Render Web    โ    โ  UptimeRobot    โ
โ   (Keepalive)   โโโโโถโ   (ExamFlow)    โโโโโโ  (Monitoring)   โ
โ   Every 5 min   โ    โ   + PostgreSQL  โ    โ  Every 5 min    โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โ                       โ                       โ
         โผ                       โผ                       โผ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Health Check  โ    โ  Keepalive      โ    โ  Notifications  โ
โ   Endpoints     โ    โ  Service        โ    โ  (Email/Telegram)โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะกะพะทะดะฐะฝะฝัะต ะบะพะผะฟะพะฝะตะฝัั

### 1. Health Check System
- **`core/health_check.py`** - ะะฐััะธัะตะฝะฝะฐั ัะธััะตะผะฐ ะฟัะพะฒะตัะบะธ ะทะดะพัะพะฒัั
- **`/health/`** - ะะตัะฐะปัะฝะฐั ะฟัะพะฒะตัะบะฐ ะฒัะตั ะบะพะผะฟะพะฝะตะฝัะพะฒ
- **`/health/simple/`** - ะััััะฐั ะฟัะพะฒะตัะบะฐ ะดะปั Render

### 2. Keepalive Service
- **`core/keepalive_service.py`** - ะัััะพะตะฝะฝัะน ัะตัะฒะธั ะฟะพะดะดะตัะถะฐะฝะธั ะฐะบัะธะฒะฝะพััะธ
- **`core/management/commands/manage_keepalive.py`** - ะะพะผะฐะฝะดะฐ ัะฟัะฐะฒะปะตะฝะธั
- **`core/management/commands/init_freemium_limits.py`** - ะะฝะธัะธะฐะปะธะทะฐัะธั ะปะธะผะธัะพะฒ

### 3. GitHub Actions
- **`.github/workflows/keepalive-enhanced.yml`** - ะฃะปัััะตะฝะฝัะน workflow
- ะะฐะฟััะบ ะบะฐะถะดัะต 5 ะผะธะฝัั
- ะัะพะฒะตัะบะฐ ะฒัะตั ัะฝะดะฟะพะธะฝัะพะฒ
- ะขะตััะธัะพะฒะฐะฝะธะต ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

### 4. Render Configuration
- **`render.yaml`** - ะะพะฝัะธะณััะฐัะธั ะดะปั Render
- Health check ะฝะฐัััะพะนะบะธ
- Cron ะทะฐะดะฐัะธ
- ะะฟัะธะผะธะทะฐัะธั ะดะปั ะฑะตัะฟะปะฐัะฝะพะณะพ ัะฐัะธัะฐ

### 5. Monitoring & Testing
- **`scripts/setup_uptimerobot.py`** - ะะฐัััะพะนะบะฐ UptimeRobot
- **`scripts/test_24_7_system.py`** - ะขะตััะธัะพะฒะฐะฝะธะต ัะธััะตะผั
- **`KEEPALIVE_24_7_SETUP.md`** - ะะพะดัะพะฑะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

## ๐ ะะพัะฐะณะพะฒัะน ะฟะปะฐะฝ ัะฐะทะฒะตัััะฒะฐะฝะธั

### ะญัะฐะฟ 1: ะะพะดะณะพัะพะฒะบะฐ (5 ะผะธะฝัั)

1. **ะะฑะฝะพะฒะธัะต ะบะพะด ะฝะฐ Render:**
   ```bash
   git add .
   git commit -m "ะะพะฑะฐะฒะปะตะฝะฐ ัะธััะตะผะฐ 24/7: health check, keepalive, ะผะพะฝะธัะพัะธะฝะณ"
   git push origin main
   ```

2. **ะะพะถะดะธัะตัั ะดะตะฟะปะพั** (2-3 ะผะธะฝััั)

### ะญัะฐะฟ 2: ะะฐัััะพะนะบะฐ Render (10 ะผะธะฝัั)

1. **ะะฑะฝะพะฒะธัะต ะฝะฐัััะพะนะบะธ ัะตัะฒะธัะฐ:**
   - Health Check Path: `/health/simple/`
   - Health Check Interval: 30 ัะตะบัะฝะด
   - Auto-Restart: ะะบะปััะตะฝะพ
   - Health Check Timeout: 10 ัะตะบัะฝะด

2. **ะะพะฑะฐะฒััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
   ```env
   WEBSITE_URL=https://examflow.ru
   ENVIRONMENT=production
   USE_REDIS_CACHE=0
   ```

3. **ะะฐัััะพะนัะต Cron ะทะฐะดะฐัะธ:**
   - ะะฐะดะฐัะฐ: `curl -s https://examflow.ru/health/simple/ > /dev/null`
   - ะะฝัะตัะฒะฐะป: ะบะฐะถะดัะต 10 ะผะธะฝัั

### ะญัะฐะฟ 3: ะะฐัััะพะนะบะฐ GitHub Actions (5 ะผะธะฝัั)

1. **ะะบัะธะฒะธััะนัะต workflow:**
   - Settings โ Actions โ General
   - ะะบะปััะธัะต "Allow all actions and reusable workflows"

2. **ะัะพะฒะตัััะต ะทะฐะฟััะบ:**
   - Actions โ ExamFlow 2.0 Enhanced Keepalive
   - ะะพะปะถะตะฝ ะทะฐะฟััะบะฐัััั ะบะฐะถะดัะต 5 ะผะธะฝัั

### ะญัะฐะฟ 4: ะะฐัััะพะนะบะฐ ะผะพะฝะธัะพัะธะฝะณะฐ (10 ะผะธะฝัั)

1. **ะะฐะฟัััะธัะต ัะบัะธะฟั UptimeRobot:**
   ```bash
   python scripts/setup_uptimerobot.py
   ```

2. **ะะปะธ ะฝะฐัััะพะนัะต ะฒัััะฝัั:**
   - ะะฐัะตะณะธัััะธััะนัะตัั ะฝะฐ https://uptimerobot.com
   - ะะพะฑะฐะฒััะต ะผะพะฝะธัะพัั ะดะปั ะฒัะตั ัะฝะดะฟะพะธะฝัะพะฒ
   - ะะฐัััะพะนัะต ัะฒะตะดะพะผะปะตะฝะธั

### ะญัะฐะฟ 5: ะขะตััะธัะพะฒะฐะฝะธะต (5 ะผะธะฝัั)

1. **ะะฐะฟัััะธัะต ัะตัั ัะธััะตะผั:**
   ```bash
   python scripts/test_24_7_system.py
   ```

2. **ะัะพะฒะตัััะต health check:**
   ```bash
   curl https://examflow.ru/health/
   curl https://examflow.ru/health/simple/
   ```

3. **ะัะพะฒะตัััะต keepalive:**
   ```bash
   python manage.py manage_keepalive status
   python manage.py manage_keepalive check
   ```

## ๐ ะะถะธะดะฐะตะผัะต ัะตะทัะปััะฐัั

### ะะพัะปะต ะฝะฐัััะพะนะบะธ:

โ **ะกะฐะนั ัะฐะฑะพัะฐะตั 24/7** ะฑะตะท ะทะฐััะฟะฐะฝะธั  
โ **Telegram ะฑะพั ะพัะฒะตัะฐะตั** ะฒ ะปัะฑะพะต ะฒัะตะผั  
โ **ะะฐะทะฐ ะดะฐะฝะฝัั ะดะพัััะฟะฝะฐ** ะฟะพััะพัะฝะฝะพ  
โ **ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต** ะฟัะธ ัะฑะพัั  
โ **ะะพะฝะธัะพัะธะฝะณ** ะฒัะตั ะบะพะผะฟะพะฝะตะฝัะพะฒ  
โ **ะฃะฒะตะดะพะผะปะตะฝะธั** ะพ ะฟัะพะฑะปะตะผะฐั  

### ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ:

- **Uptime**: >99%
- **Response Time**: <3 ัะตะบัะฝะดั
- **Error Rate**: <1%
- **Memory Usage**: <400MB

## ๐ง ะะพะผะฐะฝะดั ัะฟัะฐะฒะปะตะฝะธั

### Keepalive Service
```bash
# ะะฐะฟััะบ ะฒ ัะตะถะธะผะต ะดะตะผะพะฝะฐ
python manage.py manage_keepalive start --daemon

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
python manage.py manage_keepalive status

# ะะดะฝะพะบัะฐัะฝะฐั ะฟัะพะฒะตัะบะฐ
python manage.py manage_keepalive check

# ะัะพะฑัะถะดะตะฝะธะต ัะตัะฒะธัะพะฒ
python manage.py manage_keepalive wake

# ะััะฐะฝะพะฒะบะฐ
python manage.py manage_keepalive stop
```

### Health Check
```bash
# ะะตัะฐะปัะฝะฐั ะฟัะพะฒะตัะบะฐ
curl https://examflow.ru/health/

# ะััััะฐั ะฟัะพะฒะตัะบะฐ
curl https://examflow.ru/health/simple/

# ะัะพะฒะตัะบะฐ ัะตัะตะท Django
python manage.py check
```

### ะขะตััะธัะพะฒะฐะฝะธะต
```bash
# ะะพะปะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ัะธััะตะผั
python scripts/test_24_7_system.py

# ะขะตััะธัะพะฒะฐะฝะธะต keepalive
python manage.py keepalive --once --component all
```

## ๐จ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะัะพะฑะปะตะผะฐ: ะกะฐะนั ะทะฐััะฟะฐะตั

**ะะตัะตะฝะธะต:**
1. ะัะพะฒะตัััะต GitHub Actions
2. ะัะพะฒะตัััะต UptimeRobot ะผะพะฝะธัะพัั
3. ะะฐะฟัััะธัะต keepalive ะฒัััะฝัั:
   ```bash
   python manage.py manage_keepalive wake
   ```

### ะัะพะฑะปะตะผะฐ: ะะตะดะปะตะฝะฝัะน ะพัะบะปะธะบ

**ะะตัะตะฝะธะต:**
1. ะัะพะฒะตัััะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ ะฒ Render Dashboard
2. ะัะธััะธัะต ะบัั:
   ```bash
   python manage.py clear_cache
   ```
3. ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะธั ะฒ Render

### ะัะพะฑะปะตะผะฐ: ะัะธะฑะบะธ ะฑะฐะทั ะดะฐะฝะฝัั

**ะะตัะตะฝะธะต:**
1. ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต:
   ```bash
   python manage.py dbshell
   ```
2. ะัะฟะพะปะฝะธัะต ะผะธะณัะฐัะธะธ:
   ```bash
   python manage.py migrate
   ```

## ๐ ะะพะฝะธัะพัะธะฝะณ

### Render Dashboard
- ะะพะณะธ ัะตัะฒะธัะฐ
- ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- ะกัะฐััั health check

### GitHub Actions
- ะััะพัะธั ะทะฐะฟััะบะพะฒ
- ะะตะทัะปััะฐัั ะฟัะพะฒะตัะพะบ
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ัะฑะพัั

### UptimeRobot
- ะกัะฐัะธััะธะบะฐ ะดะพัััะฟะฝะพััะธ
- ะััะพัะธั ะธะฝัะธะดะตะฝัะพะฒ
- ะัะตะผั ะพัะบะปะธะบะฐ

## ๐ฏ ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ ัะตัะตะฝะธั

### 1. ะัะตะดะพัะฒัะฐัะตะฝะธะต ะทะฐััะฟะฐะฝะธั
- GitHub Actions ะบะฐะถะดัะต 5 ะผะธะฝัั
- UptimeRobot ะบะฐะถะดัะต 5 ะผะธะฝัั
- Cron ะทะฐะดะฐัะธ ะบะฐะถะดัะต 10 ะผะธะฝัั
- ะัััะพะตะฝะฝัะน keepalive ัะตัะฒะธั

### 2. ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต
- Health check ะบะฐะถะดัะต 30 ัะตะบัะฝะด
- Auto-restart ะฟัะธ ัะฑะพัั
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟัะพะฑัะถะดะตะฝะธะต ะบะพะผะฟะพะฝะตะฝัะพะฒ

### 3. ะะฟัะธะผะธะทะฐัะธั ะดะปั Render
- ะะธะผะธั ะฟะฐะผััะธ <400MB
- ะญััะตะบัะธะฒะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต CPU
- Webhook ะฒะผะตััะพ polling
- ะััะธัะพะฒะฐะฝะธะต ะทะฐะฟัะพัะพะฒ

### 4. ะะพะฝะธัะพัะธะฝะณ ะธ ัะฒะตะดะพะผะปะตะฝะธั
- ะะตัะฐะปัะฝะฐั ััะฐัะธััะธะบะฐ ัะฐะฑะพัั
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ัะฑะพัั
- ะะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั ัะพะฑััะธะน

## โ ะงะตะบ-ะปะธัั ัะฐะทะฒะตัััะฒะฐะฝะธั

- [ ] ะะพะด ะพะฑะฝะพะฒะปะตะฝ ะธ ะทะฐะดะตะฟะปะพะตะฝ ะฝะฐ Render
- [ ] ะะฐัััะพะนะบะธ Render ะพะฑะฝะพะฒะปะตะฝั
- [ ] GitHub Actions ะฐะบัะธะฒะธัะพะฒะฐะฝ
- [ ] UptimeRobot ะฝะฐัััะพะตะฝ
- [ ] Health check ัะฐะฑะพัะฐะตั
- [ ] Keepalive ัะตัะฒะธั ะทะฐะฟััะตะฝ
- [ ] ะขะตััะธัะพะฒะฐะฝะธะต ะฟัะพะนะดะตะฝะพ
- [ ] ะะพะฝะธัะพัะธะฝะณ ะฐะบัะธะฒะตะฝ

## ๐ ะะฐะบะปััะตะฝะธะต

ะกะธััะตะผะฐ ะณะพัะพะฒะฐ ะบ ัะฐะฑะพัะต 24/7! ะัะต ะบะพะผะฟะพะฝะตะฝัั ะฝะฐัััะพะตะฝั ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ะฑะตัะฟะตัะตะฑะพะนะฝะพะน ัะฐะฑะพัั ExamFlow ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ัะพะปัะบะพ ะฑะตัะฟะปะฐัะฝัั ะธะฝััััะผะตะฝัะพะฒ.

**ะัะตะผั ะฝะฐัััะพะนะบะธ**: ~30 ะผะธะฝัั  
**ะกัะพะธะผะพััั**: 0 ััะฑะปะตะน  
**ะะฐะดะตะถะฝะพััั**: >99% uptime  

---

**ะกะธััะตะผะฐ ExamFlow 2.0 ะณะพัะพะฒะฐ ะบ ัะฐะฑะพัะต 24/7! ๐**
