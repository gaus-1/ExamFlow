# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ ExamFlow —á–µ—Ä–µ–∑ Webhook

## üìã –ü—Ä–æ–±–ª–µ–º–∞
–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —Å —Å–∞–π—Ç–∞.

## üöÄ –†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Webhook (–ë–ï–°–ü–õ–ê–¢–ù–û)

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ webhook —Ä–µ–∂–∏–º–∞:
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç Background Worker
- **–ë—ã—Å—Ç—Ä–µ–µ** - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–ù–∞–¥–µ–∂–Ω–µ–µ** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- **–ü—Ä–æ—â–µ** - –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### üîß –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
- ‚úÖ Webhook endpoint: `/bot/webhook/`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ –∫–Ω–æ–ø–æ–∫
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## ‚ö° –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï

### 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞):
```bash
python manage.py setup_webhook set
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã):
```
TELEGRAM_BOT_TOKEN=your_bot_token_here
DATABASE_URL=your_database_url
SITE_URL=https://examflow.ru
ADMIN_CHAT_ID=your_telegram_chat_id
```

## üîß –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook
python manage.py setup_webhook set

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
python manage.py setup_webhook info

# –£–¥–∞–ª–∏—Ç—å webhook (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
python manage.py setup_webhook delete
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω –∏ API
python test_bot.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
python manage.py load_sample_data
```

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ @BotFather
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é TELEGRAM_BOT_TOKEN

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞
```bash
python manage.py load_sample_data
python manage.py load_fipi_data --samples-only
```

### 3. –ë–æ—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook: `https://api.telegram.org/bot<TOKEN>/getWebhookInfo`
- –£–¥–∞–ª–∏—Ç—å webhook: `https://api.telegram.org/bot<TOKEN>/deleteWebhook`
- –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç polling, –Ω–µ webhook

### 4. –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ Render Dashboard –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ –≤ —Ñ–∞–π–ª–µ `bot.log`

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å —Å–∞–π—Ç–∞

1. –û—Ç–∫—Ä—ã—Ç—å https://examflow.ru
2. –ù–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "Telegram –ë–æ—Ç" 
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ –±–æ—Ç–∞
4. –ù–∞–∂–∞—Ç—å /start
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Ñ–∏–∫—Å

–ï—Å–ª–∏ –±–æ—Ç –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
python manage.py runbot restart

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
python manage.py runbot status

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
python manage.py load_sample_data
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ API –±–æ—Ç–∞
```bash
curl "https://api.telegram.org/bot<YOUR_TOKEN>/getMe"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
